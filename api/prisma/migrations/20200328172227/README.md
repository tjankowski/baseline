# Migration `20200328172227`

This migration has been generated by Tomasz Jankowski at 3/28/2020, 5:22:28 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."Project" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "isPrivate" BOOLEAN NOT NULL DEFAULT false ,
    "name" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."Baseline" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "isPrivate" BOOLEAN NOT NULL DEFAULT false ,
    "name" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."Topic" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "description" TEXT NOT NULL DEFAULT '' ,
    "id" TEXT NOT NULL  ,
    "name" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."Label" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "name" TEXT NOT NULL DEFAULT '' ,
    "topic" TEXT   ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("topic") REFERENCES "Topic"("id") ON DELETE SET NULL ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."Review" (
    "baseline" TEXT NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "isPrivate" BOOLEAN NOT NULL DEFAULT false ,
    "project" TEXT NOT NULL  ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("project") REFERENCES "Project"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("baseline") REFERENCES "Baseline"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."Rating" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "notes" TEXT   ,
    "review" TEXT NOT NULL  ,
    "topic" TEXT NOT NULL  ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "value" TEXT   ,
    PRIMARY KEY ("id"),FOREIGN KEY ("topic") REFERENCES "Topic"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("review") REFERENCES "Review"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."Action" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "isDone" BOOLEAN NOT NULL DEFAULT false ,
    "name" TEXT NOT NULL DEFAULT '' ,
    "project" TEXT   ,
    "review" TEXT NOT NULL  ,
    "topic" TEXT NOT NULL  ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("project") REFERENCES "Project"("id") ON DELETE SET NULL ON UPDATE CASCADE,
FOREIGN KEY ("topic") REFERENCES "Topic"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("review") REFERENCES "Review"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE UNIQUE INDEX "quaint"."Project.name" ON "Project"("name")

CREATE UNIQUE INDEX "quaint"."Baseline.name" ON "Baseline"("name")

CREATE UNIQUE INDEX "quaint"."Label.name" ON "Label"("name")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200328172227
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,84 @@
+datasource DS {
+  provider = "sqlite"
+  url = env("DATABASE_URL")
+}
+
+generator photonjs {
+  provider = "prisma-client-js"
+  binaryTargets = ["native", "rhel-openssl-1.0.x"]
+}
+
+// Define your own datamodels here and run `yarn redwood db save` to create
+// migrations for them.
+
+model Project {
+  id String @id @default(cuid())
+  name String @unique
+  isPrivate Boolean @default(value: false)
+  reviews Review[]
+  actions Action[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Baseline {
+  id String @id @default(cuid())
+  name String @unique
+  isPrivate Boolean @default(value: false)
+  reviews Review[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Topic {
+  id String @id @default(cuid())
+  name String
+  description String
+  labels Label[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Label {
+  id String @id @default(cuid())
+  name String @unique
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Review {
+  id String @id @default(cuid())
+  isPrivate Boolean @default(value: false)
+  project Project
+  baseline Baseline
+  ratings Rating[]
+  actions Action[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Rating {
+  id String @id @default(cuid())
+  review Review
+  topic Topic
+  value RatingValue?
+  notes String?
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Action {
+  id String @id @default(cuid())
+  review Review
+  topic Topic
+  isDone Boolean @default(value: false)
+  name String
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+enum RatingValue {
+  Happy
+  Acceptable
+  Unhappy
+}
```


